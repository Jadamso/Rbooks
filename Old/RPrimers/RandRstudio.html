<!DOCTYPE html>

<html>

<head>

<meta charset="utf-8" />
<meta name="generator" content="pandoc" />
<meta http-equiv="X-UA-Compatible" content="IE=EDGE" />


<meta name="author" content="Dr. J. Adamson" />


<title>Primer on Programming in R</title>

<script src="RandRstudio_files/header-attrs-2.17/header-attrs.js"></script>
<script src="RandRstudio_files/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link href="RandRstudio_files/bootstrap-3.3.5/css/bootstrap.min.css" rel="stylesheet" />
<script src="RandRstudio_files/bootstrap-3.3.5/js/bootstrap.min.js"></script>
<script src="RandRstudio_files/bootstrap-3.3.5/shim/html5shiv.min.js"></script>
<script src="RandRstudio_files/bootstrap-3.3.5/shim/respond.min.js"></script>
<style>h1 {font-size: 34px;}
       h1.title {font-size: 38px;}
       h2 {font-size: 30px;}
       h3 {font-size: 24px;}
       h4 {font-size: 18px;}
       h5 {font-size: 16px;}
       h6 {font-size: 12px;}
       code {color: inherit; background-color: rgba(0, 0, 0, 0.04);}
       pre:not([class]) { background-color: white }</style>
<script src="RandRstudio_files/jqueryui-1.11.4/jquery-ui.min.js"></script>
<link href="RandRstudio_files/tocify-1.9.1/jquery.tocify.css" rel="stylesheet" />
<script src="RandRstudio_files/tocify-1.9.1/jquery.tocify.js"></script>
<script src="RandRstudio_files/navigation-1.1/tabsets.js"></script>
<script src="RandRstudio_files/navigation-1.1/codefolding.js"></script>
<script src="RandRstudio_files/navigation-1.1/sourceembed.js"></script>
<link href="RandRstudio_files/highlightjs-9.12.0/default.css" rel="stylesheet" />
<script src="RandRstudio_files/highlightjs-9.12.0/highlight.js"></script>

<style type="text/css">
  code{white-space: pre-wrap;}
  span.smallcaps{font-variant: small-caps;}
  span.underline{text-decoration: underline;}
  div.column{display: inline-block; vertical-align: top; width: 50%;}
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
  ul.task-list{list-style: none;}
    </style>

<style type="text/css">code{white-space: pre;}</style>
<script type="text/javascript">
if (window.hljs) {
  hljs.configure({languages: []});
  hljs.initHighlightingOnLoad();
  if (document.readyState && document.readyState === "complete") {
    window.setTimeout(function() { hljs.initHighlighting(); }, 0);
  }
}
</script>




<style type="text/css">
#rmd-source-code {
  display: none;
}
</style>





<style type = "text/css">
.main-container {
  max-width: 940px;
  margin-left: auto;
  margin-right: auto;
}
img {
  max-width:100%;
}
.tabbed-pane {
  padding-top: 12px;
}
.html-widget {
  margin-bottom: 20px;
}
button.code-folding-btn:focus {
  outline: none;
}
summary {
  display: list-item;
}
details > summary > p:only-child {
  display: inline;
}
pre code {
  padding: 0;
}
</style>



<!-- tabsets -->

<style type="text/css">
.tabset-dropdown > .nav-tabs {
  display: inline-table;
  max-height: 500px;
  min-height: 44px;
  overflow-y: auto;
  border: 1px solid #ddd;
  border-radius: 4px;
}

.tabset-dropdown > .nav-tabs > li.active:before, .tabset-dropdown > .nav-tabs.nav-tabs-open:before {
  content: "\e259";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li.active:before {
  content: "\e258";
  font-family: 'Glyphicons Halflings';
  border: none;
}

.tabset-dropdown > .nav-tabs > li.active {
  display: block;
}

.tabset-dropdown > .nav-tabs > li > a,
.tabset-dropdown > .nav-tabs > li > a:focus,
.tabset-dropdown > .nav-tabs > li > a:hover {
  border: none;
  display: inline-block;
  border-radius: 4px;
  background-color: transparent;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li {
  display: block;
  float: none;
}

.tabset-dropdown > .nav-tabs > li {
  display: none;
}
</style>

<!-- code folding -->
<style type="text/css">
.code-folding-btn { margin-bottom: 4px; }
</style>



<style type="text/css">

#TOC {
  margin: 25px 0px 20px 0px;
}
@media (max-width: 768px) {
#TOC {
  position: relative;
  width: 100%;
}
}

@media print {
.toc-content {
  /* see https://github.com/w3c/csswg-drafts/issues/4434 */
  float: right;
}
}

.toc-content {
  padding-left: 30px;
  padding-right: 40px;
}

div.main-container {
  max-width: 1200px;
}

div.tocify {
  width: 20%;
  max-width: 260px;
  max-height: 85%;
}

@media (min-width: 768px) and (max-width: 991px) {
  div.tocify {
    width: 25%;
  }
}

@media (max-width: 767px) {
  div.tocify {
    width: 100%;
    max-width: none;
  }
}

.tocify ul, .tocify li {
  line-height: 20px;
}

.tocify-subheader .tocify-item {
  font-size: 0.90em;
}

.tocify .list-group-item {
  border-radius: 0px;
}


</style>



</head>

<body>


<div class="container-fluid main-container">


<!-- setup 3col/9col grid for toc_float and main content  -->
<div class="row">
<div class="col-xs-12 col-sm-4 col-md-3">
<div id="TOC" class="tocify">
</div>
</div>

<div class="toc-content col-xs-12 col-sm-8 col-md-9">




<div id="header">

<div class="btn-group pull-right float-right">
<button type="button" class="btn btn-default btn-xs btn-secondary btn-sm dropdown-toggle" data-toggle="dropdown" data-bs-toggle="dropdown" aria-haspopup="true" aria-expanded="false"><span>Code</span> <span class="caret"></span></button>
<ul class="dropdown-menu dropdown-menu-right" style="min-width: 50px;">
<li><a id="rmd-download-source" href="#">Download Rmd</a></li>
</ul>
</div>



<h1 class="title toc-ignore">Primer on Programming in R</h1>
<h4 class="author">Dr. J. Adamson</h4>
<h4 class="date">19.10.2022</h4>

</div>


<p><a href="https://github.com/" class="uri">https://github.com/</a> <a href="http://htmlpreview.github.com/Jadamso/Teaching/blob/main/RPrimers/RReproducible.html" class="uri">http://htmlpreview.github.com/Jadamso/Teaching/blob/main/RPrimers/RReproducible.html</a></p>
<div id="first-steps" class="section level1" number="1">
<h1><span class="header-section-number">1</span> First steps</h1>
<hr />
<div id="install-r" class="section level2" number="1.1">
<h2><span class="header-section-number">1.1</span> Install R</h2>
<p>Download R and the RStudio GUI</p>
<ul>
<li><a href="https://cloud.r-project.org/">R</a></li>
<li><a href="https://www.rstudio.com/products/rstudio/download/">Rstudio</a></li>
</ul>
<p>For more help setting up</p>
<ul>
<li><p><a href="https://learnr-examples.shinyapps.io/ex-setup-r/" class="uri">https://learnr-examples.shinyapps.io/ex-setup-r/</a></p></li>
<li><p><a href="https://rstudio-education.github.io/hopr/starting.html" class="uri">https://rstudio-education.github.io/hopr/starting.html</a></p></li>
<li><p><a href="https://a-little-book-of-r-for-bioinformatics.readthedocs.io/en/latest/src/installr.html" class="uri">https://a-little-book-of-r-for-bioinformatics.readthedocs.io/en/latest/src/installr.html</a></p></li>
<li><p><a href="https://cran.r-project.org/doc/manuals/R-admin.html" class="uri">https://cran.r-project.org/doc/manuals/R-admin.html</a></p></li>
<li><p><a href="https://courses.edx.org/courses/UTAustinX/UT.7.01x/3T2014/56c5437b88fa43cf828bff5371c6a924/" class="uri">https://courses.edx.org/courses/UTAustinX/UT.7.01x/3T2014/56c5437b88fa43cf828bff5371c6a924/</a></p></li>
<li><p><a href="https://owi.usgs.gov/R/training-curriculum/installr/" class="uri">https://owi.usgs.gov/R/training-curriculum/installr/</a></p></li>
<li><p><a href="https://www.earthdatascience.org/courses/earth-analytics/document-your-science/setup-r-rstudio/" class="uri">https://www.earthdatascience.org/courses/earth-analytics/document-your-science/setup-r-rstudio/</a></p></li>
</ul>
</div>
<div id="interfacing-with-the-gui." class="section level2" number="1.2">
<h2><span class="header-section-number">1.2</span> Interfacing with the GUI.</h2>
<p>Rstudio is easiest to get going. (There are other GUI’s.)</p>
<p>From <a href="https://datacarpentry.org/" class="uri">https://datacarpentry.org/</a> <img src="Figures_Manual/rstudio_session_4pane_layout.png" width="1589" /></p>
<ul>
<li>top left is where you write and save code</li>
<li>Create and save a new <code>R Script</code> file <em>My_First_Script.R</em></li>
<li>could also use a plain .txt file.</li>
<li>below is where you run your code.</li>
<li>to the right shows files and plots and …</li>
</ul>
<p>For all following examples, make sure to both execute and store your code.</p>
<p>Note that</p>
<pre class="r"><code>CodeInput_String &lt;- c(&#39;code output looks like this&#39;)
CodeInput_String</code></pre>
<pre><code>## [1] &quot;code output looks like this&quot;</code></pre>
<pre class="r"><code>## while this is just a comment</code></pre>
</div>
</div>
<div id="mathematical-objects" class="section level1" number="2">
<h1><span class="header-section-number">2</span> Mathematical Objects</h1>
<hr />
<div id="scalars-and-vectors" class="section level2" number="2.1">
<h2><span class="header-section-number">2.1</span> Scalars and Vectors</h2>
<pre class="r"><code>x0 &lt;- 1 ## Your first scalar
x0 ## Print the scalar</code></pre>
<pre><code>## [1] 1</code></pre>
<pre class="r"><code>(x0+1)^2 ## Perform and print a simple calculation</code></pre>
<pre><code>## [1] 4</code></pre>
<pre class="r"><code>x0 + NA ## often used for missing values</code></pre>
<pre><code>## [1] NA</code></pre>
<pre class="r"><code>x &lt;- c(0,1,3,10,6) ## Your First Vector
x ## Print the vector</code></pre>
<pre><code>## [1]  0  1  3 10  6</code></pre>
<pre class="r"><code>x[2] ## Print the 2nd Element; 1</code></pre>
<pre><code>## [1] 1</code></pre>
<pre class="r"><code>x+2 ## Print simple calculation; 2,3,5,8,12</code></pre>
<pre><code>## [1]  2  3  5 12  8</code></pre>
<pre class="r"><code>(x+x)^2 ## Another simple calculation with two vectors;</code></pre>
<pre><code>## [1]   0   4  36 400 144</code></pre>
<p>In R, you use multiple functions on different types of data objects. Moreover, ``typically solve complex problems by decomposing them into simple functions, not simple objects.’’ (H. Wickham)</p>
</div>
<div id="functions-of-scalars-and-vectors" class="section level2" number="2.2">
<h2><span class="header-section-number">2.2</span> Functions of Scalars and Vectors</h2>
<p>Define function sum_squared</p>
<pre class="r"><code>sum_squared &lt;- function(x1, x2) {
    y &lt;- (x1 + x2)^2
    return(y)
} </code></pre>
<pre class="r"><code>sum_squared(1, 3) ## 16</code></pre>
<pre><code>## [1] 16</code></pre>
<pre class="r"><code>sum_squared(x, 2) ## 0,4,9,36,144,400</code></pre>
<pre><code>## [1]   4   9  25 144  64</code></pre>
<pre class="r"><code>sum_squared(x, NA) ## NA,NA,NA,NA,NA</code></pre>
<pre><code>## [1] NA NA NA NA NA</code></pre>
<pre class="r"><code>sum_squared(x, x) ## 0,4,36,144,400</code></pre>
<pre><code>## [1]   0   4  36 400 144</code></pre>
</div>
<div id="random-variables" class="section level2" number="2.3">
<h2><span class="header-section-number">2.3</span> Random Variables</h2>
<p>random variables are vectors</p>
<pre class="r"><code>x2 &lt;- runif(1000)</code></pre>
</div>
<div id="functionals" class="section level2" number="2.4">
<h2><span class="header-section-number">2.4</span> Functionals</h2>
<p>Functions that take functions as arguments</p>
<pre class="r"><code>randomise &lt;- function(f){
    f( runif(1e3) )
}</code></pre>
<pre class="r"><code>randomise(mean)</code></pre>
<pre><code>## [1] 0.49276</code></pre>
<pre class="r"><code>randomise(mean)</code></pre>
<pre><code>## [1] 0.4967417</code></pre>
<pre class="r"><code>randomise(sum)</code></pre>
<pre><code>## [1] 512.6317</code></pre>
<p>Very useful for applying a function over and over again</p>
<pre class="r"><code>## sapply(1:3, f) is equivalent to c(f(1), f(2), f(3)).
## mapply takes multiple vectors
mapply(sum, 1:3, runif(3) )</code></pre>
<pre><code>## [1] 1.622312 2.544756 3.687216</code></pre>
</div>
<div id="matrices-and-matrix-functions" class="section level2" number="2.5">
<h2><span class="header-section-number">2.5</span> Matrices and Matrix-Functions</h2>
<pre class="r"><code>x_mat &lt;- cbind(x,x)
x_mat ## Print full matrix</code></pre>
<pre><code>##       x  x
## [1,]  0  0
## [2,]  1  1
## [3,]  3  3
## [4,] 10 10
## [5,]  6  6</code></pre>
<pre class="r"><code>x_mat[2,] ## Print Row 2 Elements</code></pre>
<pre><code>## x x 
## 1 1</code></pre>
<pre class="r"><code>x_mat[,2] ## Print Column 2 Elements</code></pre>
<pre><code>## [1]  0  1  3 10  6</code></pre>
<pre class="r"><code>y &lt;- apply(x_mat, 1, sum)^2 ## Apply function to each row
## ?apply  #checks the function details
y - sum_squared(x, x) ## tests if there are any differences</code></pre>
<pre><code>## [1] 0 0 0 0 0</code></pre>
<p>Many Other Functions</p>
<pre class="r"><code>x_mat * x_mat</code></pre>
<pre><code>##        x   x
## [1,]   0   0
## [2,]   1   1
## [3,]   9   9
## [4,] 100 100
## [5,]  36  36</code></pre>
<pre class="r"><code>crossprod(x_mat)</code></pre>
<pre><code>##     x   x
## x 146 146
## x 146 146</code></pre>
<pre class="r"><code>tcrossprod(x_mat) ##x_mat %*% t(x_mat)</code></pre>
<pre><code>##      [,1] [,2] [,3] [,4] [,5]
## [1,]    0    0    0    0    0
## [2,]    0    2    6   20   12
## [3,]    0    6   18   60   36
## [4,]    0   20   60  200  120
## [5,]    0   12   36  120   72</code></pre>
<pre class="r"><code>outer(x,x) ##x %o% x</code></pre>
<pre><code>##      [,1] [,2] [,3] [,4] [,5]
## [1,]    0    0    0    0    0
## [2,]    0    1    3   10    6
## [3,]    0    3    9   30   18
## [4,]    0   10   30  100   60
## [5,]    0    6   18   60   36</code></pre>
<p>Example Calculations</p>
<pre class="r"><code>## Return Y-value with minimum absolute difference from 3
abs_diff_y &lt;- abs( y - 3 ) 
abs_diff_y ## is this the luckiest number?</code></pre>
<pre><code>## [1]   3   1  33 397 141</code></pre>
<pre class="r"><code>min(abs_diff_y)</code></pre>
<pre><code>## [1] 1</code></pre>
<pre class="r"><code>which.min(abs_diff_y)</code></pre>
<pre><code>## [1] 2</code></pre>
<pre class="r"><code>y[ which.min(abs_diff_y) ]</code></pre>
<pre><code>## [1] 4</code></pre>
</div>
<div id="arrays-and-array-functions" class="section level2" number="2.6">
<h2><span class="header-section-number">2.6</span> Arrays and Array Functions</h2>
<p>generalization of matrices used in spatial econometrics</p>
<pre class="r"><code>a &lt;- array(data = 1:24, dim = c(2, 3, 4))
a</code></pre>
<pre><code>## , , 1
## 
##      [,1] [,2] [,3]
## [1,]    1    3    5
## [2,]    2    4    6
## 
## , , 2
## 
##      [,1] [,2] [,3]
## [1,]    7    9   11
## [2,]    8   10   12
## 
## , , 3
## 
##      [,1] [,2] [,3]
## [1,]   13   15   17
## [2,]   14   16   18
## 
## , , 4
## 
##      [,1] [,2] [,3]
## [1,]   19   21   23
## [2,]   20   22   24</code></pre>
<pre class="r"><code>a[1, , , drop = FALSE]  # Row 1</code></pre>
<pre><code>## , , 1
## 
##      [,1] [,2] [,3]
## [1,]    1    3    5
## 
## , , 2
## 
##      [,1] [,2] [,3]
## [1,]    7    9   11
## 
## , , 3
## 
##      [,1] [,2] [,3]
## [1,]   13   15   17
## 
## , , 4
## 
##      [,1] [,2] [,3]
## [1,]   19   21   23</code></pre>
<pre class="r"><code>a[, 1, , drop = FALSE]  # Column 1</code></pre>
<pre><code>## , , 1
## 
##      [,1]
## [1,]    1
## [2,]    2
## 
## , , 2
## 
##      [,1]
## [1,]    7
## [2,]    8
## 
## , , 3
## 
##      [,1]
## [1,]   13
## [2,]   14
## 
## , , 4
## 
##      [,1]
## [1,]   19
## [2,]   20</code></pre>
<pre class="r"><code>a[, , 1, drop = FALSE]  # Layer 1</code></pre>
<pre><code>## , , 1
## 
##      [,1] [,2] [,3]
## [1,]    1    3    5
## [2,]    2    4    6</code></pre>
<pre class="r"><code>a[ 1, 1,  ]  # Row 1, column 1</code></pre>
<pre><code>## [1]  1  7 13 19</code></pre>
<pre class="r"><code>a[ 1,  , 1]  # Row 1, &quot;layer&quot; 1</code></pre>
<pre><code>## [1] 1 3 5</code></pre>
<pre class="r"><code>a[  , 1, 1]  # Column 1, &quot;layer&quot; 1</code></pre>
<pre><code>## [1] 1 2</code></pre>
<pre class="r"><code>a[1 , 1, 1]  # Row 1, column 1, &quot;layer&quot; 1</code></pre>
<pre><code>## [1] 1</code></pre>
<p>apply extends to arrays</p>
<pre class="r"><code>apply(a, 1, mean)    # Row means</code></pre>
<pre><code>## [1] 12 13</code></pre>
<pre class="r"><code>apply(a, 2, mean)    # Column means</code></pre>
<pre><code>## [1] 10.5 12.5 14.5</code></pre>
<pre class="r"><code>apply(a, 3, mean)    # &quot;Layer&quot; means</code></pre>
<pre><code>## [1]  3.5  9.5 15.5 21.5</code></pre>
<pre class="r"><code>apply(a, 1:2, mean)  # Row/Column combination </code></pre>
<pre><code>##      [,1] [,2] [,3]
## [1,]   10   12   14
## [2,]   11   13   15</code></pre>
</div>
<div id="other-commom-types-of-data" class="section level2" number="2.7">
<h2><span class="header-section-number">2.7</span> Other Commom Types of Data</h2>
<pre class="r"><code>l1 &lt;- 1:10 ## cardinal numbers
l2 &lt;- factor(c(1,2,3), ordered=T) ## ordinal numbers, &quot;indicator names&quot;
l3 &lt;- &#39;hello world&#39;  ## character strings
l4 &lt;- list(l1, l2, list(l3, &#39;way too late&#39;)) ## lists

## data.frames: your most common data type
    ## matrix of different data-types
    ## well-ordered lists
l5 &lt;- data.frame(x=l1, y=l1)</code></pre>
</div>
</div>
<div id="plots" class="section level1" number="3">
<h1><span class="header-section-number">3</span> Plots</h1>
<hr />
<div id="basics" class="section level2" number="3.1">
<h2><span class="header-section-number">3.1</span> Basics</h2>
<p>Create and Plot a Toy Dataset</p>
<pre class="r"><code>x &lt;- seq(1,10) ## create values for x
## Create random standard-normal noise
rnorm(length(x), mean=0, sd=1) ## noise </code></pre>
<pre><code>##  [1]  1.2801935  1.9248574  0.2695878 -0.2835533 -0.9661304 -2.2031526
##  [7]  1.4650743  0.9633473 -0.7270115 -1.0785878</code></pre>
<pre class="r"><code>rnorm(length(x), mean=0, sd=1) ## new noise</code></pre>
<pre><code>##  [1]  1.13907459  1.49985300 -0.53518057 -1.50294407 -1.82485996 -0.33979369
##  [7]  0.01408079  0.82557397 -0.51409180 -0.16534151</code></pre>
<pre class="r"><code>e &lt;- rnorm(length(x), mean=0, sd=1) ## store 
y &lt;- .25*x + e ## create values for y
xy_mat &lt;- cbind(x=x, y=y)

## your first plot is pretty standard
plot(y~x, xy_mat)  ## pretty and standard</code></pre>
<p><img src="RandRstudio_files/figure-html/unnamed-chunk-17-1.png" width="672" /></p>
<p>Create and Plot a Larger Toy Dataset</p>
<pre class="r"><code>x &lt;- seq(1, 10, by=.0002)
e &lt;- rnorm(length(x), mean=0, sd=1)
y &lt;- .25*x + e
xy_dat &lt;- data.frame(x=x, y=y)
head(xy_dat)</code></pre>
<pre><code>##        x          y
## 1 1.0000  0.8465454
## 2 1.0002  0.6908411
## 3 1.0004  1.7274556
## 4 1.0006  0.2861865
## 5 1.0008 -1.7872953
## 6 1.0010 -0.2516187</code></pre>
<pre class="r"><code>plot(y~x, xy_dat, pch=16, col=rgb(0,0,0,.1), cex=.5)</code></pre>
<p><img src="RandRstudio_files/figure-html/unnamed-chunk-18-1.png" width="672" /></p>
</div>
<div id="equation-fitting-example" class="section level2" number="3.2">
<h2><span class="header-section-number">3.2</span> Equation Fitting Example</h2>
<p>Run and Plot an OLS Regression</p>
<pre class="r"><code>reg &lt;- lm(y~x, data=xy_dat)
summary(reg)</code></pre>
<pre><code>## 
## Call:
## lm(formula = y ~ x, data = xy_dat)
## 
## Residuals:
##     Min      1Q  Median      3Q     Max 
## -4.5077 -0.6755  0.0003  0.6753  4.1840 
## 
## Coefficients:
##              Estimate Std. Error t value Pr(&gt;|t|)    
## (Intercept) -0.005054   0.011018  -0.459    0.646    
## x            0.250223   0.001811 138.142   &lt;2e-16 ***
## ---
## Signif. codes:  0 &#39;***&#39; 0.001 &#39;**&#39; 0.01 &#39;*&#39; 0.05 &#39;.&#39; 0.1 &#39; &#39; 1
## 
## Residual standard error: 0.9983 on 44999 degrees of freedom
## Multiple R-squared:  0.2978, Adjusted R-squared:  0.2978 
## F-statistic: 1.908e+04 on 1 and 44999 DF,  p-value: &lt; 2.2e-16</code></pre>
<pre class="r"><code>## Add the line of best fit
plot(y~x, xy_dat, pch=16, col=rgb(0,0,0,.1), cex=.5)
abline(reg)</code></pre>
<p><img src="RandRstudio_files/figure-html/unnamed-chunk-19-1.png" width="672" /></p>
<pre class="r"><code>## Can Also Add Confidence Intervals
## https://rpubs.com/aaronsc32/regression-confidence-prediction-intervals</code></pre>
<p>Polish and Export Your Plot</p>
<pre class="r"><code>plot(y~x, xy_dat, pch=16, col=rgb(0,0,0,.1), cex=.5,
    xlab=&#39;&#39;, ylab=&#39;&#39;) ## Format Axis Labels Seperately
mtext(&#39;y=0.25 x + e\n e ~ standard-normal&#39;, 2, line=2)
mtext(&#39;x=[1,...,10]&#39;, 1, line=2)
title(&#39;Plot like a Boss&#39;)
title(&#39;boss: american slang for excellent; outstanding&#39;,
    cex.main=.5, font=1, line=1)
legend(&#39;topleft&#39;, legend=&#39;single data point&#39;,
    title=&#39;do you see the normal distribution?&#39;,
    pch=16, col=rgb(0,0,0,.1), cex=.5)</code></pre>
<p><img src="RandRstudio_files/figure-html/unnamed-chunk-20-1.png" width="672" /></p>
<p>Can export figure with specific dimensions</p>
<pre class="r"><code>pdf( &#39;Figures/plot_example.pdf&#39;, height=5, width=5)
plot(y~x, xy_dat, pch=16, col=rgb(0,0,0,.1), cex=.5)
dev.off()</code></pre>
</div>
</div>
<div id="moving-beyond-the-basics" class="section level1" number="4">
<h1><span class="header-section-number">4</span> Moving beyond the basics</h1>
<hr />
<p>Use expansion <code>packages</code> for common procedures and more functionality</p>
<pre class="r"><code>## Other packages used in this primer
install.packages(&quot;stargazer&quot;)
install.packages(&quot;reshape2&quot;)
install.packages(&quot;purrr&quot;)</code></pre>
<p>The most common tasks have <a href="https://www.rstudio.com/resources/cheatsheets/">cheatsheets</a> you can use. E.g.,</p>
<ul>
<li><a href="https://github.com/rstudio/cheatsheets/blob/main/rstudio-ide.pdf" class="uri">https://github.com/rstudio/cheatsheets/blob/main/rstudio-ide.pdf</a></li>
</ul>
<p>Sometimes you will want to install a package from GitHub. For this, you can use <a href="https://devtools.r-lib.org/">devtools</a></p>
<pre class="r"><code>install.packages(&quot;devtools&quot;)</code></pre>
<div id="task-views" class="section level2" number="4.1">
<h2><span class="header-section-number">4.1</span> Task Views</h2>
<p>Task views list relevant packages. E.g.,</p>
<p>For all students and early researchers,</p>
<ul>
<li><a href="https://cran.r-project.org/web/views/ReproducibleResearch.html" class="uri">https://cran.r-project.org/web/views/ReproducibleResearch.html</a></li>
</ul>
<p>For microeconometrics,</p>
<ul>
<li><a href="https://cran.r-project.org/web/views/Econometrics.html" class="uri">https://cran.r-project.org/web/views/Econometrics.html</a></li>
</ul>
<p>For spatial econometrics</p>
<ul>
<li><a href="https://cran.r-project.org/web/views/Spatial.html" class="uri">https://cran.r-project.org/web/views/Spatial.html</a></li>
<li><a href="https://cran.r-project.org/web/views/SpatioTemporal.html" class="uri">https://cran.r-project.org/web/views/SpatioTemporal.html</a></li>
</ul>
<p>Multiple packages may have the same function name for different commands. In this case use <code>package::function_name</code> to specify the package</p>
<p><strong>Don’t fret</strong> Sometimes there is not a specific package for your data.</p>
<p>Odds are, you can do most of what you want with base code.</p>
<ul>
<li>Packages just wrap base code in convient formats</li>
<li>see <a href="https://cran.r-project.org/web/views/" class="uri">https://cran.r-project.org/web/views/</a> for topical overviews</li>
</ul>
<p>Statisticians might have different naming conventions</p>
<ul>
<li>if the usual software just spits out a nice plot you might have to dig a little to know precisely what you want</li>
<li>your data are fundamentally numbers, strings, etc… You only have to figure out how to read it in.</li>
</ul>
<p>But remember that many of the best plots are custom made (see <a href="https://www.r-graph-gallery.com/" class="uri">https://www.r-graph-gallery.com/</a>), and can also be interactive or animated</p>
<ul>
<li><a href="https://plotly.com/r/" class="uri">https://plotly.com/r/</a></li>
<li><a href="https://shiny.rstudio.com/gallery/" class="uri">https://shiny.rstudio.com/gallery/</a></li>
</ul>
</div>
<div id="introductions-to-r" class="section level2" number="4.2">
<h2><span class="header-section-number">4.2</span> Introductions to R</h2>
<p>There are many good yet free programming books online. E.g.,</p>
<ul>
<li><a href="https://cran.r-project.org/doc/manuals/R-intro.html" class="uri">https://cran.r-project.org/doc/manuals/R-intro.html</a></li>
<li>R Graphics Cookbook, 2nd edition. Winston Chang. 2021. <a href="https://r-graphics.org/" class="uri">https://r-graphics.org/</a></li>
<li>Spatial Data Science with R: Introduction to R. Robert J. Hijmans. 2021. <a href="https://rspatial.org/intr/index.html" class="uri">https://rspatial.org/intr/index.html</a></li>
<li>R for Data Science. H. Wickham and G. Grolemund. 2017. <a href="https://r4ds.had.co.nz/index.html" class="uri">https://r4ds.had.co.nz/index.html</a></li>
<li>An Introduction to R. W. N. Venables, D. M. Smith, R Core Team. 2017. <a href="https://colinfay.me/intro-to-r/" class="uri">https://colinfay.me/intro-to-r/</a></li>
</ul>
<p>There are also many good yet free-online tutorials and courses. E.g., \</p>
<ul>
<li><a href="https://rafalab.github.io/dsbook/" class="uri">https://rafalab.github.io/dsbook/</a></li>
<li><a href="https://moderndive.com/foreword.html" class="uri">https://moderndive.com/foreword.html</a></li>
<li><a href="https://rstudio.cloud/learn/primers/1.2" class="uri">https://rstudio.cloud/learn/primers/1.2</a></li>
<li><a href="https://cran.r-project.org/manuals.html" class="uri">https://cran.r-project.org/manuals.html</a></li>
<li><a href="https://stats.idre.ucla.edu/stat/data/intro_r/intro_r_interactive_flat.html" class="uri">https://stats.idre.ucla.edu/stat/data/intro_r/intro_r_interactive_flat.html</a></li>
<li><a href="https://cswr.nrhstat.org/app-r" class="uri">https://cswr.nrhstat.org/app-r</a></li>
</ul>
<p>What we covered in this primer should be enough to get you going.</p>
</div>
</div>
<div id="data-analysis-examples" class="section level1" number="5">
<h1><span class="header-section-number">5</span> Data analysis examples</h1>
<hr />
<div id="us-govt-spending-on-science" class="section level2" number="5.1">
<h2><span class="header-section-number">5.1</span> US Gov’t Spending on Science</h2>
<p>Lets inspect some spurious correlations inside <a href="https://tylervigen.com/spurious-correlations" class="uri">https://tylervigen.com/spurious-correlations</a></p>
<pre class="r"><code>## Your data is not made up in the computer (hopefully!)
## will normally be an address on your PC
vigen_csv &lt;- read.csv( paste0(
&#39;https://raw.githubusercontent.com/the-mad-statter/&#39;,
&#39;whysospurious/master/data-raw/tylervigen.csv&#39;) ) 
class(vigen_csv)</code></pre>
<pre><code>## [1] &quot;data.frame&quot;</code></pre>
<pre class="r"><code>names(vigen_csv)</code></pre>
<pre><code>##  [1] &quot;year&quot;                         &quot;science_spending&quot;            
##  [3] &quot;hanging_suicides&quot;             &quot;pool_fall_drownings&quot;         
##  [5] &quot;cage_films&quot;                   &quot;cheese_percap&quot;               
##  [7] &quot;bed_deaths&quot;                   &quot;maine_divorce_rate&quot;          
##  [9] &quot;margarine_percap&quot;             &quot;miss_usa_age&quot;                
## [11] &quot;steam_murders&quot;                &quot;arcade_revenue&quot;              
## [13] &quot;computer_science_doctorates&quot;  &quot;noncom_space_launches&quot;       
## [15] &quot;sociology_doctorates&quot;         &quot;mozzarella_percap&quot;           
## [17] &quot;civil_engineering_doctorates&quot; &quot;fishing_drownings&quot;           
## [19] &quot;kentucky_marriage_rate&quot;       &quot;oil_imports_norway&quot;          
## [21] &quot;chicken_percap&quot;               &quot;train_collision_deaths&quot;      
## [23] &quot;oil_imports_total&quot;            &quot;pool_drownings&quot;              
## [25] &quot;nuclear_power&quot;                &quot;japanese_cars_sold&quot;          
## [27] &quot;motor_vehicle_suicides&quot;       &quot;spelling_bee_word_length&quot;    
## [29] &quot;spider_deaths&quot;                &quot;math_doctorates&quot;             
## [31] &quot;uranium&quot;</code></pre>
<pre class="r"><code>vigen_csv[1:5,1:5]</code></pre>
<pre><code>##   year science_spending hanging_suicides pool_fall_drownings cage_films
## 1 1996               NA               NA                  NA         NA
## 2 1997               NA               NA                  NA         NA
## 3 1998               NA               NA                  NA         NA
## 4 1999            18079             5427                 109          2
## 5 2000            18594             5688                 102          2</code></pre>
<pre class="r"><code>## similar `apply&#39; functions
lapply(vigen_csv[,1:5], class) ## like apply, but for lists</code></pre>
<pre><code>## $year
## [1] &quot;integer&quot;
## 
## $science_spending
## [1] &quot;integer&quot;
## 
## $hanging_suicides
## [1] &quot;integer&quot;
## 
## $pool_fall_drownings
## [1] &quot;integer&quot;
## 
## $cage_films
## [1] &quot;integer&quot;</code></pre>
<pre class="r"><code>sapply(vigen_csv[,1:5], class) ## lapply, formatted to a vector</code></pre>
<pre><code>##                year    science_spending    hanging_suicides pool_fall_drownings 
##           &quot;integer&quot;           &quot;integer&quot;           &quot;integer&quot;           &quot;integer&quot; 
##          cage_films 
##           &quot;integer&quot;</code></pre>
<p>The US government spending on science is ruining cinema (p&lt;.001)!</p>
<pre class="r"><code>## Drop Data before 1999
vigen_csv &lt;- vigen_csv[vigen_csv$year &gt;= 1999,] 

## Run OLS Regression $
reg1 &lt;-  lm(cage_films ~ -1 + science_spending,
    data=vigen_csv)
summary(reg1)</code></pre>
<pre><code>## 
## Call:
## lm(formula = cage_films ~ -1 + science_spending, data = vigen_csv)
## 
## Residuals:
##     Min      1Q  Median      3Q     Max 
## -1.7670 -0.7165  0.1447  0.7890  1.4531 
## 
## Coefficients:
##                   Estimate Std. Error t value Pr(&gt;|t|)    
## science_spending 9.978e-05  1.350e-05    7.39 2.34e-05 ***
## ---
## Signif. codes:  0 &#39;***&#39; 0.001 &#39;**&#39; 0.01 &#39;*&#39; 0.05 &#39;.&#39; 0.1 &#39; &#39; 1
## 
## Residual standard error: 1.033 on 10 degrees of freedom
##   (1 observation deleted due to missingness)
## Multiple R-squared:  0.8452, Adjusted R-squared:  0.8297 
## F-statistic: 54.61 on 1 and 10 DF,  p-value: 2.343e-05</code></pre>
<p>It’s not all bad, people in maine stay married longer.</p>
<pre class="r"><code>plot.new()
plot.window(xlim=c(1999, 2009), ylim=c(7,9))
lines(log(maine_divorce_rate*1000)~year, data=vigen_csv)
lines(log(science_spending/10)~year, data=vigen_csv, lty=2)
axis(1)
axis(2)
legend(&#39;topright&#39;, lty=c(1,2), legend=c(
    &#39;log(maine_divorce_rate*1000)&#39;,
    &#39;log(science_spending/10)&#39;))</code></pre>
<p><img src="RandRstudio_files/figure-html/unnamed-chunk-26-1.png" width="672" /></p>
<p>For more intuition on spurious correlations, try <a href="http://shiny.calpoly.sh/Corr_Reg_Game/" class="uri">http://shiny.calpoly.sh/Corr_Reg_Game/</a></p>
<pre class="r"><code>par(mfrow=c(1,2), mar=c(2,2,2,1))
plot.new()
plot.window(xlim=c(1999, 2009), ylim=c(5,9)*1000)
lines(science_spending/3~year, data=vigen_csv, lty=1, col=2, pch=16)
text(2003, 8200, &#39;US spending on science, space, technology (USD/3)&#39;, col=2, cex=.6, srt=30)
lines(hanging_suicides~year, data=vigen_csv, lty=1, col=4, pch=16)
text(2004, 6500, &#39;US Suicides by hanging, strangulation, suffocation (Deaths)&#39;, col=4, cex=.6, srt=30)
axis(1)
axis(2)


plot.new()
plot.window(xlim=c(2002, 2009), ylim=c(0,5))
lines(cage_films~year, data=vigen_csv[vigen_csv$year&gt;=2002,], lty=1, col=2, pch=16)
text(2006, 0.5, &#39;Number of films with Nicolas Cage (Films)&#39;, col=2, cex=.6, srt=0)
lines(pool_fall_drownings/25~year, data=vigen_csv[vigen_csv$year&gt;=2002,], lty=1, col=4, pch=16)
text(2006, 4.5, &#39;Number of drownings by falling into pool (US Deaths/25)&#39;, col=4, cex=.6, srt=0)
axis(1)
axis(2)</code></pre>
<p><img src="RandRstudio_files/figure-html/unnamed-chunk-27-1.png" width="672" /></p>
<p>And don’t Forget ``if you torture the data long enough, it will confess.’’</p>
<pre class="r"><code>## Include an intercept to regression 1
reg2 &lt;-  lm(cage_films ~ science_spending, data=vigen_csv)
library(stargazer)</code></pre>
<pre><code>## 
## Please cite as:</code></pre>
<pre><code>##  Hlavac, Marek (2022). stargazer: Well-Formatted Regression and Summary Statistics Tables.</code></pre>
<pre><code>##  R package version 5.2.3. https://CRAN.R-project.org/package=stargazer</code></pre>
<pre class="r"><code>stargazer(reg1, reg2, type=&#39;text&#39;)</code></pre>
<pre><code>## 
## ============================================================
##                               Dependent variable:           
##                     ----------------------------------------
##                                    cage_films               
##                              (1)                  (2)       
## ------------------------------------------------------------
## science_spending          0.0001***             0.0001      
##                           (0.00001)            (0.0001)     
##                                                             
## Constant                                        -0.140      
##                                                 (2.166)     
##                                                             
## ------------------------------------------------------------
## Observations                  11                  11        
## R2                          0.845                0.124      
## Adjusted R2                 0.830                0.026      
## Residual Std. Error    1.033 (df = 10)      1.089 (df = 9)  
## F Statistic         54.609*** (df = 1; 10) 1.271 (df = 1; 9)
## ============================================================
## Note:                            *p&lt;0.1; **p&lt;0.05; ***p&lt;0.01</code></pre>
<p>Nevertheless, data transformation is often necessary before regression analysis. For downloading tips, see <a href="https://raw.githubusercontent.com/rstudio/cheatsheets/main/data-import.pdf" class="uri">https://raw.githubusercontent.com/rstudio/cheatsheets/main/data-import.pdf</a></p>
<!--\url{https://github.com/rstudio/cheatsheets/raw/master/data-transformation.pdf}-->
</div>
<div id="data-processing-simulation" class="section level2" number="5.2">
<h2><span class="header-section-number">5.2</span> Data processing simulation</h2>
<p>Make random datasets</p>
<pre class="r"><code>make_noisy_data &lt;- function(n){
    x &lt;- seq(1,10, length.out=n)
    e &lt;- rnorm(length(x), mean=0, sd=10)
    y &lt;- .25*x + e
    xy_mat &lt;- data.frame(ID=seq(x),x=x, y=y)
    return(xy_mat)
}
dat1 &lt;- make_noisy_data(6)
dat1</code></pre>
<pre><code>##   ID    x          y
## 1  1  1.0  -2.599336
## 2  2  2.8   6.269934
## 3  3  4.6  -9.431466
## 4  4  6.4  -3.141720
## 5  5  8.2 -16.349300
## 6  6 10.0 -12.603404</code></pre>
<pre class="r"><code>dat2 &lt;- make_noisy_data(6)
## merging data in wide format
dat_merged_wide &lt;- merge(dat1, dat2,
    by=&#39;ID&#39;, suffixes=c(&#39;.1&#39;,&#39;.2&#39;))</code></pre>
<p>Data Merging</p>
<pre class="r"><code>## merging data in long format and reshaping to wide
dat_merged_long &lt;- rbind( cbind(dat1,DF=1),cbind(dat2,DF=2))
library(reshape2)
dat_melted &lt;- melt(dat_merged_long, id.vars=c(&#39;ID&#39;, &#39;DF&#39;))
dat_merged_wide2 &lt;- dcast(dat_melted, ID~DF+variable)

dat_merged_wide == dat_merged_wide2</code></pre>
<pre><code>##        ID  x.1  y.1  x.2  y.2
## [1,] TRUE TRUE TRUE TRUE TRUE
## [2,] TRUE TRUE TRUE TRUE TRUE
## [3,] TRUE TRUE TRUE TRUE TRUE
## [4,] TRUE TRUE TRUE TRUE TRUE
## [5,] TRUE TRUE TRUE TRUE TRUE
## [6,] TRUE TRUE TRUE TRUE TRUE</code></pre>
<!-- ## CONVERT IMAGES
for pdfile in *.pdf ; do 
convert -verbose -density 500  "${pdfile}" "${pdfile%.*}".png;
done
-->
</div>
<div id="custom-figures" class="section level2" number="5.3">
<h2><span class="header-section-number">5.3</span> Custom figures</h2>
<p><img src="Figures_Manual/Vegetation.png" width="2400" /></p>
<p><img src="Figures_Manual/Balances_Trial.png" width="3000" /></p>
<p><img src="Figures_Manual/PopulationDensity2.png" width="3000" /></p>
<p><img src="Figures_Manual/SampleExample.png" width="1750" /></p>
<p><img src="Figures_Manual/SemiInclusive_Example.png" width="3000" /></p>
<p><img src="Figures_Manual/Stability_3.png" width="1000" /></p>
<p><img src="Figures_Manual/EvolutionaryDynamics.png" width="3000" /></p>
<p><img src="Figures_Manual/Experiment_Timeline.png" width="1750" /></p>
</div>
</div>
<div id="latest-versions" class="section level1" number="6">
<h1><span class="header-section-number">6</span> Latest versions</h1>
<hr />
<p>Make sure your packages are up to date</p>
<pre class="r"><code>update.packages()</code></pre>
<p>Make sure you have the latest version of R for class. If not, then reinstall R.</p>
<p>After reinstalling, you can update <em>all</em> packages stored in <em>all</em> <code>.libPaths()</code> with the following command</p>
<pre class="r"><code>pkgs &lt;- installed.packages( .libPaths() )[,&#39;Package&#39;]
install.packages(
    pkgs=pkgs,
    lib=.libPaths()[1],
    type=&#39;source&#39;
)</code></pre>
<p>To find all broken packages after an update</p>
<pre class="r"><code>library(purrr)

set_names(.libPaths()) %&gt;%
  map(function(lib) {
    .packages(all.available = TRUE, lib.loc = lib) %&gt;%
        keep(function(pkg) {
            f &lt;- system.file(&#39;Meta&#39;, &#39;package.rds&#39;, package = pkg, lib.loc = lib)
            tryCatch({readRDS(f); FALSE}, error = function(e) TRUE)
        })
  })
## https://stackoverflow.com/questions/31935516/installing-r-packages-error-in-readrdsfile-error-reading-from-connection/55997765</code></pre>
</div>

<div id="rmd-source-code">LS0tCnRpdGxlOiAiUHJpbWVyIG9uIFByb2dyYW1taW5nIGluIFIiCmF1dGhvcjogIkRyLiBKLiBBZGFtc29uIgpkYXRlOiAiYHIgZm9ybWF0KFN5cy50aW1lKCksICclZC4lbS4lWScpYCIKb3V0cHV0OgogIGh0bWxfZG9jdW1lbnQ6CiAgICAgICAgY29kZV9kb3dubG9hZDogdHJ1ZQogICAgICAgIHRvYzogdHJ1ZQogICAgICAgIHRvY19mbG9hdDogdHJ1ZQogICAgICAgIHRvY19jb2xsYXBzZWQ6IHRydWUKICAgICAgICB0b2NfZGVwdGg6IDIKICAgICAgICBudW1iZXJfc2VjdGlvbnM6IHRydWUKICAgICAgICBzZWxmX2NvbnRhaW5lZDogZmFsc2UKLS0tCgpodHRwczovL2dpdGh1Yi5jb20vCiAgIGh0dHA6Ly9odG1scHJldmlldy5naXRodWIuY29tL0phZGFtc28vVGVhY2hpbmcvYmxvYi9tYWluL1JQcmltZXJzL1JSZXByb2R1Y2libGUuaHRtbAogIAojIEZpcnN0IHN0ZXBzCioqKgoKIyMgSW5zdGFsbCBSCgpEb3dubG9hZCBSIGFuZCB0aGUgUlN0dWRpbyBHVUkKCiogW1JdKGh0dHBzOi8vY2xvdWQuci1wcm9qZWN0Lm9yZy8pCiogW1JzdHVkaW9dKGh0dHBzOi8vd3d3LnJzdHVkaW8uY29tL3Byb2R1Y3RzL3JzdHVkaW8vZG93bmxvYWQvKQoKCkZvciBtb3JlIGhlbHAgc2V0dGluZyB1cAoKKiBodHRwczovL2xlYXJuci1leGFtcGxlcy5zaGlueWFwcHMuaW8vZXgtc2V0dXAtci8KKiBodHRwczovL3JzdHVkaW8tZWR1Y2F0aW9uLmdpdGh1Yi5pby9ob3ByL3N0YXJ0aW5nLmh0bWwKKiBodHRwczovL2EtbGl0dGxlLWJvb2stb2Ytci1mb3ItYmlvaW5mb3JtYXRpY3MucmVhZHRoZWRvY3MuaW8vZW4vbGF0ZXN0L3NyYy9pbnN0YWxsci5odG1sCiogaHR0cHM6Ly9jcmFuLnItcHJvamVjdC5vcmcvZG9jL21hbnVhbHMvUi1hZG1pbi5odG1sCgoqIGh0dHBzOi8vY291cnNlcy5lZHgub3JnL2NvdXJzZXMvVVRBdXN0aW5YL1VULjcuMDF4LzNUMjAxNC81NmM1NDM3Yjg4ZmE0M2NmODI4YmZmNTM3MWM2YTkyNC8KKiBodHRwczovL293aS51c2dzLmdvdi9SL3RyYWluaW5nLWN1cnJpY3VsdW0vaW5zdGFsbHIvCiogaHR0cHM6Ly93d3cuZWFydGhkYXRhc2NpZW5jZS5vcmcvY291cnNlcy9lYXJ0aC1hbmFseXRpY3MvZG9jdW1lbnQteW91ci1zY2llbmNlL3NldHVwLXItcnN0dWRpby8KCgoKCiMjIEludGVyZmFjaW5nIHdpdGggdGhlIEdVSS4KClJzdHVkaW8gaXMgZWFzaWVzdCB0byBnZXQgZ29pbmcuCihUaGVyZSBhcmUgb3RoZXIgR1VJJ3MuKQoKRnJvbSBodHRwczovL2RhdGFjYXJwZW50cnkub3JnLwpgYGB7ciwgZWNobz1GQUxTRX0KIGtuaXRyOjppbmNsdWRlX2dyYXBoaWNzKCIuL0ZpZ3VyZXNfTWFudWFsL3JzdHVkaW9fc2Vzc2lvbl80cGFuZV9sYXlvdXQucG5nIikKYGBgCgoKKiB0b3AgbGVmdCBpcyB3aGVyZSB5b3Ugd3JpdGUgYW5kIHNhdmUgY29kZQogKiBDcmVhdGUgYW5kIHNhdmUgYSBuZXcgYFIgU2NyaXB0YCBmaWxlICpNeV9GaXJzdF9TY3JpcHQuUioKICogY291bGQgYWxzbyB1c2UgYSBwbGFpbiAudHh0IGZpbGUuCiogYmVsb3cgaXMgd2hlcmUgeW91IHJ1biB5b3VyIGNvZGUuCiogdG8gdGhlIHJpZ2h0IHNob3dzIGZpbGVzIGFuZCBwbG90cyBhbmQgLi4uCgpGb3IgYWxsIGZvbGxvd2luZyBleGFtcGxlcywgbWFrZSBzdXJlIHRvIGJvdGggZXhlY3V0ZSBhbmQgc3RvcmUgeW91ciBjb2RlLgoKCk5vdGUgdGhhdCAKCgpgYGB7ciwgZXZhbD1UUlVFLCBlY2hvPVRSVUV9CkNvZGVJbnB1dF9TdHJpbmcgPC0gYygnY29kZSBvdXRwdXQgbG9va3MgbGlrZSB0aGlzJykKQ29kZUlucHV0X1N0cmluZwojIyB3aGlsZSB0aGlzIGlzIGp1c3QgYSBjb21tZW50CmBgYAoKIyBNYXRoZW1hdGljYWwgT2JqZWN0cwoqKioKCgojIyBTY2FsYXJzIGFuZCBWZWN0b3JzCgpgYGB7cn0KeDAgPC0gMSAjIyBZb3VyIGZpcnN0IHNjYWxhcgp4MCAjIyBQcmludCB0aGUgc2NhbGFyCih4MCsxKV4yICMjIFBlcmZvcm0gYW5kIHByaW50IGEgc2ltcGxlIGNhbGN1bGF0aW9uCngwICsgTkEgIyMgb2Z0ZW4gdXNlZCBmb3IgbWlzc2luZyB2YWx1ZXMKYGBgCgpgYGB7cn0KeCA8LSBjKDAsMSwzLDEwLDYpICMjIFlvdXIgRmlyc3QgVmVjdG9yCnggIyMgUHJpbnQgdGhlIHZlY3Rvcgp4WzJdICMjIFByaW50IHRoZSAybmQgRWxlbWVudDsgMQp4KzIgIyMgUHJpbnQgc2ltcGxlIGNhbGN1bGF0aW9uOyAyLDMsNSw4LDEyCih4K3gpXjIgIyMgQW5vdGhlciBzaW1wbGUgY2FsY3VsYXRpb24gd2l0aCB0d28gdmVjdG9yczsKYGBgCgoKCgoKCgpJbiBSLCB5b3UgdXNlIG11bHRpcGxlIGZ1bmN0aW9ucyBvbiBkaWZmZXJlbnQgdHlwZXMgb2YgZGF0YSBvYmplY3RzLiBNb3Jlb3ZlciwgYGB0eXBpY2FsbHkgc29sdmUgY29tcGxleCBwcm9ibGVtcyBieSBkZWNvbXBvc2luZyB0aGVtIGludG8gc2ltcGxlIGZ1bmN0aW9ucywgbm90IHNpbXBsZSBvYmplY3RzLicnIChILiBXaWNraGFtKQoKCgojIyAgRnVuY3Rpb25zIG9mIFNjYWxhcnMgYW5kIFZlY3RvcnMKCkRlZmluZSBmdW5jdGlvbiBzdW1fc3F1YXJlZApgYGB7cn0Kc3VtX3NxdWFyZWQgPC0gZnVuY3Rpb24oeDEsIHgyKSB7Cgl5IDwtICh4MSArIHgyKV4yCglyZXR1cm4oeSkKfSAKYGBgCmBgYHtyfQpzdW1fc3F1YXJlZCgxLCAzKSAjIyAxNgpzdW1fc3F1YXJlZCh4LCAyKSAjIyAwLDQsOSwzNiwxNDQsNDAwCnN1bV9zcXVhcmVkKHgsIE5BKSAjIyBOQSxOQSxOQSxOQSxOQQpzdW1fc3F1YXJlZCh4LCB4KSAjIyAwLDQsMzYsMTQ0LDQwMApgYGAKCgojIyBSYW5kb20gVmFyaWFibGVzCgpyYW5kb20gdmFyaWFibGVzIGFyZSB2ZWN0b3JzCmBgYHtyfQp4MiA8LSBydW5pZigxMDAwKQpgYGAKCgojIyBGdW5jdGlvbmFscwoKRnVuY3Rpb25zIHRoYXQgdGFrZSBmdW5jdGlvbnMgYXMgYXJndW1lbnRzIAoKYGBge3J9CnJhbmRvbWlzZSA8LSBmdW5jdGlvbihmKXsKICAgIGYoIHJ1bmlmKDFlMykgKQp9CmBgYApgYGB7cn0KcmFuZG9taXNlKG1lYW4pCgpyYW5kb21pc2UobWVhbikKCnJhbmRvbWlzZShzdW0pCmBgYAoKClZlcnkgdXNlZnVsIGZvciBhcHBseWluZyBhIGZ1bmN0aW9uIG92ZXIgYW5kIG92ZXIgYWdhaW4KCmBgYHtyfQojIyBzYXBwbHkoMTozLCBmKSBpcyBlcXVpdmFsZW50IHRvIGMoZigxKSwgZigyKSwgZigzKSkuCiMjIG1hcHBseSB0YWtlcyBtdWx0aXBsZSB2ZWN0b3JzCm1hcHBseShzdW0sIDE6MywgcnVuaWYoMykgKQpgYGAKCiMjICBNYXRyaWNlcyBhbmQgTWF0cml4LUZ1bmN0aW9ucwoKYGBge3J9CnhfbWF0IDwtIGNiaW5kKHgseCkKeF9tYXQgIyMgUHJpbnQgZnVsbCBtYXRyaXgKeF9tYXRbMixdICMjIFByaW50IFJvdyAyIEVsZW1lbnRzCnhfbWF0WywyXSAjIyBQcmludCBDb2x1bW4gMiBFbGVtZW50cwoKeSA8LSBhcHBseSh4X21hdCwgMSwgc3VtKV4yICMjIEFwcGx5IGZ1bmN0aW9uIHRvIGVhY2ggcm93CiMjID9hcHBseSAgI2NoZWNrcyB0aGUgZnVuY3Rpb24gZGV0YWlscwp5IC0gc3VtX3NxdWFyZWQoeCwgeCkgIyMgdGVzdHMgaWYgdGhlcmUgYXJlIGFueSBkaWZmZXJlbmNlcwpgYGAKCk1hbnkgT3RoZXIgRnVuY3Rpb25zCmBgYHtyfQp4X21hdCAqIHhfbWF0Cgpjcm9zc3Byb2QoeF9tYXQpCgp0Y3Jvc3Nwcm9kKHhfbWF0KSAjI3hfbWF0ICUqJSB0KHhfbWF0KQoKb3V0ZXIoeCx4KSAjI3ggJW8lIHgKYGBgCgoKRXhhbXBsZSBDYWxjdWxhdGlvbnMKCmBgYHtyfQojIyBSZXR1cm4gWS12YWx1ZSB3aXRoIG1pbmltdW0gYWJzb2x1dGUgZGlmZmVyZW5jZSBmcm9tIDMKYWJzX2RpZmZfeSA8LSBhYnMoIHkgLSAzICkgCmFic19kaWZmX3kgIyMgaXMgdGhpcyB0aGUgbHVja2llc3QgbnVtYmVyPwoKbWluKGFic19kaWZmX3kpCndoaWNoLm1pbihhYnNfZGlmZl95KQp5WyB3aGljaC5taW4oYWJzX2RpZmZfeSkgXQpgYGAKCgoKIyMgQXJyYXlzIGFuZCBBcnJheSBGdW5jdGlvbnMKCmdlbmVyYWxpemF0aW9uIG9mIG1hdHJpY2VzCnVzZWQgaW4gc3BhdGlhbCBlY29ub21ldHJpY3MKCmBgYHtyfQphIDwtIGFycmF5KGRhdGEgPSAxOjI0LCBkaW0gPSBjKDIsIDMsIDQpKQphCgphWzEsICwgLCBkcm9wID0gRkFMU0VdICAjIFJvdyAxCmFbLCAxLCAsIGRyb3AgPSBGQUxTRV0gICMgQ29sdW1uIDEKYVssICwgMSwgZHJvcCA9IEZBTFNFXSAgIyBMYXllciAxCgoKYVsgMSwgMSwgIF0gICMgUm93IDEsIGNvbHVtbiAxCmFbIDEsICAsIDFdICAjIFJvdyAxLCAibGF5ZXIiIDEKYVsgICwgMSwgMV0gICMgQ29sdW1uIDEsICJsYXllciIgMQphWzEgLCAxLCAxXSAgIyBSb3cgMSwgY29sdW1uIDEsICJsYXllciIgMQpgYGAKCmFwcGx5IGV4dGVuZHMgdG8gYXJyYXlzCgoKYGBge3J9CmFwcGx5KGEsIDEsIG1lYW4pICAgICMgUm93IG1lYW5zCmFwcGx5KGEsIDIsIG1lYW4pICAgICMgQ29sdW1uIG1lYW5zCmFwcGx5KGEsIDMsIG1lYW4pICAgICMgIkxheWVyIiBtZWFucwphcHBseShhLCAxOjIsIG1lYW4pICAjIFJvdy9Db2x1bW4gY29tYmluYXRpb24gCmBgYAoKCgoKCiMjICBPdGhlciBDb21tb20gVHlwZXMgb2YgRGF0YQoKYGBge3J9CmwxIDwtIDE6MTAgIyMgY2FyZGluYWwgbnVtYmVycwpsMiA8LSBmYWN0b3IoYygxLDIsMyksIG9yZGVyZWQ9VCkgIyMgb3JkaW5hbCBudW1iZXJzLCAiaW5kaWNhdG9yIG5hbWVzIgpsMyA8LSAnaGVsbG8gd29ybGQnICAjIyBjaGFyYWN0ZXIgc3RyaW5ncwpsNCA8LSBsaXN0KGwxLCBsMiwgbGlzdChsMywgJ3dheSB0b28gbGF0ZScpKSAjIyBsaXN0cwoKIyMgZGF0YS5mcmFtZXM6IHlvdXIgbW9zdCBjb21tb24gZGF0YSB0eXBlCiAgICAjIyBtYXRyaXggb2YgZGlmZmVyZW50IGRhdGEtdHlwZXMKICAgICMjIHdlbGwtb3JkZXJlZCBsaXN0cwpsNSA8LSBkYXRhLmZyYW1lKHg9bDEsIHk9bDEpCmBgYAoKCiMgUGxvdHMKKioqCgoKIyMgQmFzaWNzCgpDcmVhdGUgYW5kIFBsb3QgYSBUb3kgRGF0YXNldAoKYGBge3J9CnggPC0gc2VxKDEsMTApICMjIGNyZWF0ZSB2YWx1ZXMgZm9yIHgKIyMgQ3JlYXRlIHJhbmRvbSBzdGFuZGFyZC1ub3JtYWwgbm9pc2UKcm5vcm0obGVuZ3RoKHgpLCBtZWFuPTAsIHNkPTEpICMjIG5vaXNlIApybm9ybShsZW5ndGgoeCksIG1lYW49MCwgc2Q9MSkgIyMgbmV3IG5vaXNlCmUgPC0gcm5vcm0obGVuZ3RoKHgpLCBtZWFuPTAsIHNkPTEpICMjIHN0b3JlIAp5IDwtIC4yNSp4ICsgZSAjIyBjcmVhdGUgdmFsdWVzIGZvciB5Cnh5X21hdCA8LSBjYmluZCh4PXgsIHk9eSkKCiMjIHlvdXIgZmlyc3QgcGxvdCBpcyBwcmV0dHkgc3RhbmRhcmQKcGxvdCh5fngsIHh5X21hdCkgICMjIHByZXR0eSBhbmQgc3RhbmRhcmQKYGBgCgoKCkNyZWF0ZSBhbmQgUGxvdCBhIExhcmdlciBUb3kgRGF0YXNldAoKYGBge3J9CnggPC0gc2VxKDEsIDEwLCBieT0uMDAwMikKZSA8LSBybm9ybShsZW5ndGgoeCksIG1lYW49MCwgc2Q9MSkKeSA8LSAuMjUqeCArIGUKeHlfZGF0IDwtIGRhdGEuZnJhbWUoeD14LCB5PXkpCmhlYWQoeHlfZGF0KQoKcGxvdCh5fngsIHh5X2RhdCwgcGNoPTE2LCBjb2w9cmdiKDAsMCwwLC4xKSwgY2V4PS41KQpgYGAKCgoKCgojIyAgRXF1YXRpb24gRml0dGluZyBFeGFtcGxlCgoKUnVuIGFuZCBQbG90IGFuIE9MUyBSZWdyZXNzaW9uCgpgYGB7cn0KcmVnIDwtIGxtKHl+eCwgZGF0YT14eV9kYXQpCnN1bW1hcnkocmVnKQojIyBBZGQgdGhlIGxpbmUgb2YgYmVzdCBmaXQKcGxvdCh5fngsIHh5X2RhdCwgcGNoPTE2LCBjb2w9cmdiKDAsMCwwLC4xKSwgY2V4PS41KQphYmxpbmUocmVnKQoKIyMgQ2FuIEFsc28gQWRkIENvbmZpZGVuY2UgSW50ZXJ2YWxzCiMjIGh0dHBzOi8vcnB1YnMuY29tL2Fhcm9uc2MzMi9yZWdyZXNzaW9uLWNvbmZpZGVuY2UtcHJlZGljdGlvbi1pbnRlcnZhbHMKYGBgCgoKClBvbGlzaCBhbmQgRXhwb3J0IFlvdXIgUGxvdAoKYGBge3J9CnBsb3QoeX54LCB4eV9kYXQsIHBjaD0xNiwgY29sPXJnYigwLDAsMCwuMSksIGNleD0uNSwKICAgIHhsYWI9JycsIHlsYWI9JycpICMjIEZvcm1hdCBBeGlzIExhYmVscyBTZXBlcmF0ZWx5Cm10ZXh0KCd5PTAuMjUgeCArIGVcbiBlIH4gc3RhbmRhcmQtbm9ybWFsJywgMiwgbGluZT0yKQptdGV4dCgneD1bMSwuLi4sMTBdJywgMSwgbGluZT0yKQp0aXRsZSgnUGxvdCBsaWtlIGEgQm9zcycpCnRpdGxlKCdib3NzOiBhbWVyaWNhbiBzbGFuZyBmb3IgZXhjZWxsZW50OyBvdXRzdGFuZGluZycsCiAgICBjZXgubWFpbj0uNSwgZm9udD0xLCBsaW5lPTEpCmxlZ2VuZCgndG9wbGVmdCcsIGxlZ2VuZD0nc2luZ2xlIGRhdGEgcG9pbnQnLAogICAgdGl0bGU9J2RvIHlvdSBzZWUgdGhlIG5vcm1hbCBkaXN0cmlidXRpb24/JywKICAgIHBjaD0xNiwgY29sPXJnYigwLDAsMCwuMSksIGNleD0uNSkKYGBgCgoKQ2FuIGV4cG9ydCBmaWd1cmUgd2l0aCBzcGVjaWZpYyBkaW1lbnNpb25zCmBgYHtyLCBldmFsPUZ9CnBkZiggJ0ZpZ3VyZXMvcGxvdF9leGFtcGxlLnBkZicsIGhlaWdodD01LCB3aWR0aD01KQpwbG90KHl+eCwgeHlfZGF0LCBwY2g9MTYsIGNvbD1yZ2IoMCwwLDAsLjEpLCBjZXg9LjUpCmRldi5vZmYoKQpgYGAKCgojIE1vdmluZyBiZXlvbmQgdGhlIGJhc2ljcwoqKioKCgoKVXNlIGV4cGFuc2lvbiBgcGFja2FnZXNgIGZvciBjb21tb24gcHJvY2VkdXJlcyBhbmQgbW9yZSBmdW5jdGlvbmFsaXR5CmBgYHtyLCBldmFsPUZBTFNFfQojIyBPdGhlciBwYWNrYWdlcyB1c2VkIGluIHRoaXMgcHJpbWVyCmluc3RhbGwucGFja2FnZXMoInN0YXJnYXplciIpCmluc3RhbGwucGFja2FnZXMoInJlc2hhcGUyIikKaW5zdGFsbC5wYWNrYWdlcygicHVycnIiKQpgYGAKCgpUaGUgbW9zdCBjb21tb24gdGFza3MgaGF2ZSBbY2hlYXRzaGVldHNdKGh0dHBzOi8vd3d3LnJzdHVkaW8uY29tL3Jlc291cmNlcy9jaGVhdHNoZWV0cy8pIHlvdSBjYW4gdXNlLiBFLmcuLCAKCiogaHR0cHM6Ly9naXRodWIuY29tL3JzdHVkaW8vY2hlYXRzaGVldHMvYmxvYi9tYWluL3JzdHVkaW8taWRlLnBkZgoKClNvbWV0aW1lcyB5b3Ugd2lsbCB3YW50IHRvIGluc3RhbGwgYSBwYWNrYWdlIGZyb20gR2l0SHViLiBGb3IgdGhpcywgeW91IGNhbiB1c2UgW2RldnRvb2xzXShodHRwczovL2RldnRvb2xzLnItbGliLm9yZy8pCmBgYHtyLCBldmFsPUZ9Cmluc3RhbGwucGFja2FnZXMoImRldnRvb2xzIikKYGBgCgoKIyMgVGFzayBWaWV3cwoKVGFzayB2aWV3cyBsaXN0IHJlbGV2YW50IHBhY2thZ2VzLiBFLmcuLCAKCgpGb3IgYWxsIHN0dWRlbnRzIGFuZCBlYXJseSByZXNlYXJjaGVycywgCgoqIGh0dHBzOi8vY3Jhbi5yLXByb2plY3Qub3JnL3dlYi92aWV3cy9SZXByb2R1Y2libGVSZXNlYXJjaC5odG1sCgoKRm9yIG1pY3JvZWNvbm9tZXRyaWNzLAoKKiBodHRwczovL2NyYW4uci1wcm9qZWN0Lm9yZy93ZWIvdmlld3MvRWNvbm9tZXRyaWNzLmh0bWwKCgpGb3Igc3BhdGlhbCBlY29ub21ldHJpY3MgCgoqIGh0dHBzOi8vY3Jhbi5yLXByb2plY3Qub3JnL3dlYi92aWV3cy9TcGF0aWFsLmh0bWwKKiBodHRwczovL2NyYW4uci1wcm9qZWN0Lm9yZy93ZWIvdmlld3MvU3BhdGlvVGVtcG9yYWwuaHRtbAoKCk11bHRpcGxlIHBhY2thZ2VzIG1heSBoYXZlIHRoZSBzYW1lIGZ1bmN0aW9uIG5hbWUgZm9yIGRpZmZlcmVudCBjb21tYW5kcy4gCkluIHRoaXMgY2FzZSB1c2UgYGBwYWNrYWdlOjpmdW5jdGlvbl9uYW1lYGAgdG8gc3BlY2lmeSB0aGUgcGFja2FnZQoKCgoKCioqRG9uJ3QgZnJldCoqIFNvbWV0aW1lcyB0aGVyZSBpcyBub3QgYSBzcGVjaWZpYyBwYWNrYWdlIGZvciB5b3VyIGRhdGEuCgpPZGRzIGFyZSwgeW91IGNhbiBkbyBtb3N0IG9mIHdoYXQgeW91IHdhbnQgd2l0aCBiYXNlIGNvZGUuCgoqIFBhY2thZ2VzIGp1c3Qgd3JhcCBiYXNlIGNvZGUgaW4gY29udmllbnQgZm9ybWF0cwoqIHNlZSBodHRwczovL2NyYW4uci1wcm9qZWN0Lm9yZy93ZWIvdmlld3MvIGZvciB0b3BpY2FsIG92ZXJ2aWV3cwoKU3RhdGlzdGljaWFucyBtaWdodCBoYXZlIGRpZmZlcmVudCBuYW1pbmcgY29udmVudGlvbnMKCiogaWYgdGhlIHVzdWFsIHNvZnR3YXJlIGp1c3Qgc3BpdHMgb3V0IGEgbmljZSBwbG90CnlvdSBtaWdodCBoYXZlIHRvIGRpZyBhIGxpdHRsZSB0byBrbm93IHByZWNpc2VseSB3aGF0IHlvdSB3YW50CiogeW91ciBkYXRhIGFyZSBmdW5kYW1lbnRhbGx5IG51bWJlcnMsIHN0cmluZ3MsIGV0Yy4uLgpZb3Ugb25seSBoYXZlIHRvIGZpZ3VyZSBvdXQgaG93IHRvIHJlYWQgaXQgaW4uCgoKQnV0IHJlbWVtYmVyIHRoYXQgbWFueSBvZiB0aGUgYmVzdCBwbG90cyBhcmUgY3VzdG9tIG1hZGUgKHNlZSBodHRwczovL3d3dy5yLWdyYXBoLWdhbGxlcnkuY29tLyksCmFuZCBjYW4gYWxzbyBiZSBpbnRlcmFjdGl2ZSBvciBhbmltYXRlZAoKKiBodHRwczovL3Bsb3RseS5jb20vci8KKiBodHRwczovL3NoaW55LnJzdHVkaW8uY29tL2dhbGxlcnkvCgoKIyMgSW50cm9kdWN0aW9ucyB0byBSCgpUaGVyZSBhcmUgbWFueSBnb29kIHlldCBmcmVlIHByb2dyYW1taW5nIGJvb2tzIG9ubGluZS4gRS5nLiwgCgoqIGh0dHBzOi8vY3Jhbi5yLXByb2plY3Qub3JnL2RvYy9tYW51YWxzL1ItaW50cm8uaHRtbAoqIFIgR3JhcGhpY3MgQ29va2Jvb2ssIDJuZCBlZGl0aW9uLiBXaW5zdG9uIENoYW5nLiAyMDIxLiBodHRwczovL3ItZ3JhcGhpY3Mub3JnLwoqIFNwYXRpYWwgRGF0YSBTY2llbmNlIHdpdGggUjogSW50cm9kdWN0aW9uIHRvIFIuIFJvYmVydCBKLiBIaWptYW5zLiAyMDIxLiBodHRwczovL3JzcGF0aWFsLm9yZy9pbnRyL2luZGV4Lmh0bWwKKiBSIGZvciBEYXRhIFNjaWVuY2UuIEguIFdpY2toYW0gYW5kIEcuIEdyb2xlbXVuZC4gMjAxNy4gaHR0cHM6Ly9yNGRzLmhhZC5jby5uei9pbmRleC5odG1sCiogQW4gSW50cm9kdWN0aW9uIHRvIFIuIFcuIE4uIFZlbmFibGVzLCBELiBNLiBTbWl0aCwgUiBDb3JlIFRlYW0uIDIwMTcuIGh0dHBzOi8vY29saW5mYXkubWUvaW50cm8tdG8tci8KCgpUaGVyZSBhcmUgYWxzbyBtYW55IGdvb2QgeWV0IGZyZWUtb25saW5lIHR1dG9yaWFscyBhbmQgY291cnNlcy4gRS5nLiwgXFwKCiogaHR0cHM6Ly9yYWZhbGFiLmdpdGh1Yi5pby9kc2Jvb2svCiogaHR0cHM6Ly9tb2Rlcm5kaXZlLmNvbS9mb3Jld29yZC5odG1sCiogaHR0cHM6Ly9yc3R1ZGlvLmNsb3VkL2xlYXJuL3ByaW1lcnMvMS4yCiogaHR0cHM6Ly9jcmFuLnItcHJvamVjdC5vcmcvbWFudWFscy5odG1sCiogaHR0cHM6Ly9zdGF0cy5pZHJlLnVjbGEuZWR1L3N0YXQvZGF0YS9pbnRyb19yL2ludHJvX3JfaW50ZXJhY3RpdmVfZmxhdC5odG1sCiogaHR0cHM6Ly9jc3dyLm5yaHN0YXQub3JnL2FwcC1yCgpXaGF0IHdlIGNvdmVyZWQgaW4gdGhpcyBwcmltZXIgc2hvdWxkIGJlIGVub3VnaCB0byBnZXQgeW91IGdvaW5nLgoKCgoKIyBEYXRhIGFuYWx5c2lzIGV4YW1wbGVzCioqKgoKIyMgVVMgR292J3QgU3BlbmRpbmcgb24gU2NpZW5jZQoKCkxldHMgaW5zcGVjdCBzb21lIHNwdXJpb3VzIGNvcnJlbGF0aW9ucyBpbnNpZGUgaHR0cHM6Ly90eWxlcnZpZ2VuLmNvbS9zcHVyaW91cy1jb3JyZWxhdGlvbnMKCmBgYHtyfQojIyBZb3VyIGRhdGEgaXMgbm90IG1hZGUgdXAgaW4gdGhlIGNvbXB1dGVyIChob3BlZnVsbHkhKQojIyB3aWxsIG5vcm1hbGx5IGJlIGFuIGFkZHJlc3Mgb24geW91ciBQQwp2aWdlbl9jc3YgPC0gcmVhZC5jc3YoIHBhc3RlMCgKJ2h0dHBzOi8vcmF3LmdpdGh1YnVzZXJjb250ZW50LmNvbS90aGUtbWFkLXN0YXR0ZXIvJywKJ3doeXNvc3B1cmlvdXMvbWFzdGVyL2RhdGEtcmF3L3R5bGVydmlnZW4uY3N2JykgKSAKY2xhc3ModmlnZW5fY3N2KQpuYW1lcyh2aWdlbl9jc3YpCnZpZ2VuX2NzdlsxOjUsMTo1XQoKIyMgc2ltaWxhciBgYXBwbHknIGZ1bmN0aW9ucwpsYXBwbHkodmlnZW5fY3N2WywxOjVdLCBjbGFzcykgIyMgbGlrZSBhcHBseSwgYnV0IGZvciBsaXN0cwpzYXBwbHkodmlnZW5fY3N2WywxOjVdLCBjbGFzcykgIyMgbGFwcGx5LCBmb3JtYXR0ZWQgdG8gYSB2ZWN0b3IKYGBgCgoKVGhlIFVTIGdvdmVybm1lbnQgc3BlbmRpbmcgb24gc2NpZW5jZSBpcyBydWluaW5nIGNpbmVtYQoocDwuMDAxKSEKCmBgYHtyfQojIyBEcm9wIERhdGEgYmVmb3JlIDE5OTkKdmlnZW5fY3N2IDwtIHZpZ2VuX2Nzdlt2aWdlbl9jc3YkeWVhciA+PSAxOTk5LF0gCgojIyBSdW4gT0xTIFJlZ3Jlc3Npb24gJApyZWcxIDwtICBsbShjYWdlX2ZpbG1zIH4gLTEgKyBzY2llbmNlX3NwZW5kaW5nLAogICAgZGF0YT12aWdlbl9jc3YpCnN1bW1hcnkocmVnMSkKYGBgCgoKCkl0J3Mgbm90IGFsbCBiYWQsIHBlb3BsZSBpbiBtYWluZSBzdGF5IG1hcnJpZWQgbG9uZ2VyLgoKYGBge3J9CnBsb3QubmV3KCkKcGxvdC53aW5kb3coeGxpbT1jKDE5OTksIDIwMDkpLCB5bGltPWMoNyw5KSkKbGluZXMobG9nKG1haW5lX2Rpdm9yY2VfcmF0ZSoxMDAwKX55ZWFyLCBkYXRhPXZpZ2VuX2NzdikKbGluZXMobG9nKHNjaWVuY2Vfc3BlbmRpbmcvMTApfnllYXIsIGRhdGE9dmlnZW5fY3N2LCBsdHk9MikKYXhpcygxKQpheGlzKDIpCmxlZ2VuZCgndG9wcmlnaHQnLCBsdHk9YygxLDIpLCBsZWdlbmQ9YygKICAgICdsb2cobWFpbmVfZGl2b3JjZV9yYXRlKjEwMDApJywKICAgICdsb2coc2NpZW5jZV9zcGVuZGluZy8xMCknKSkKYGBgCgoKCgoKCkZvciBtb3JlIGludHVpdGlvbiBvbiBzcHVyaW91cyBjb3JyZWxhdGlvbnMsIHRyeSBodHRwOi8vc2hpbnkuY2FscG9seS5zaC9Db3JyX1JlZ19HYW1lLwoKYGBge3J9CnBhcihtZnJvdz1jKDEsMiksIG1hcj1jKDIsMiwyLDEpKQpwbG90Lm5ldygpCnBsb3Qud2luZG93KHhsaW09YygxOTk5LCAyMDA5KSwgeWxpbT1jKDUsOSkqMTAwMCkKbGluZXMoc2NpZW5jZV9zcGVuZGluZy8zfnllYXIsIGRhdGE9dmlnZW5fY3N2LCBsdHk9MSwgY29sPTIsIHBjaD0xNikKdGV4dCgyMDAzLCA4MjAwLCAnVVMgc3BlbmRpbmcgb24gc2NpZW5jZSwgc3BhY2UsIHRlY2hub2xvZ3kgKFVTRC8zKScsIGNvbD0yLCBjZXg9LjYsIHNydD0zMCkKbGluZXMoaGFuZ2luZ19zdWljaWRlc355ZWFyLCBkYXRhPXZpZ2VuX2NzdiwgbHR5PTEsIGNvbD00LCBwY2g9MTYpCnRleHQoMjAwNCwgNjUwMCwgJ1VTIFN1aWNpZGVzIGJ5IGhhbmdpbmcsIHN0cmFuZ3VsYXRpb24sIHN1ZmZvY2F0aW9uIChEZWF0aHMpJywgY29sPTQsIGNleD0uNiwgc3J0PTMwKQpheGlzKDEpCmF4aXMoMikKCgpwbG90Lm5ldygpCnBsb3Qud2luZG93KHhsaW09YygyMDAyLCAyMDA5KSwgeWxpbT1jKDAsNSkpCmxpbmVzKGNhZ2VfZmlsbXN+eWVhciwgZGF0YT12aWdlbl9jc3ZbdmlnZW5fY3N2JHllYXI+PTIwMDIsXSwgbHR5PTEsIGNvbD0yLCBwY2g9MTYpCnRleHQoMjAwNiwgMC41LCAnTnVtYmVyIG9mIGZpbG1zIHdpdGggTmljb2xhcyBDYWdlIChGaWxtcyknLCBjb2w9MiwgY2V4PS42LCBzcnQ9MCkKbGluZXMocG9vbF9mYWxsX2Ryb3duaW5ncy8yNX55ZWFyLCBkYXRhPXZpZ2VuX2Nzdlt2aWdlbl9jc3YkeWVhcj49MjAwMixdLCBsdHk9MSwgY29sPTQsIHBjaD0xNikKdGV4dCgyMDA2LCA0LjUsICdOdW1iZXIgb2YgZHJvd25pbmdzIGJ5IGZhbGxpbmcgaW50byBwb29sIChVUyBEZWF0aHMvMjUpJywgY29sPTQsIGNleD0uNiwgc3J0PTApCmF4aXMoMSkKYXhpcygyKQpgYGAKCgpBbmQgZG9uJ3QgRm9yZ2V0IGBgaWYgeW91IHRvcnR1cmUgdGhlIGRhdGEgbG9uZyBlbm91Z2gsIGl0IHdpbGwgY29uZmVzcy4nJwoKYGBge3J9CiMjIEluY2x1ZGUgYW4gaW50ZXJjZXB0IHRvIHJlZ3Jlc3Npb24gMQpyZWcyIDwtICBsbShjYWdlX2ZpbG1zIH4gc2NpZW5jZV9zcGVuZGluZywgZGF0YT12aWdlbl9jc3YpCmxpYnJhcnkoc3RhcmdhemVyKQpzdGFyZ2F6ZXIocmVnMSwgcmVnMiwgdHlwZT0ndGV4dCcpCmBgYAoKTmV2ZXJ0aGVsZXNzLCBkYXRhIHRyYW5zZm9ybWF0aW9uIGlzIG9mdGVuIG5lY2Vzc2FyeSBiZWZvcmUgcmVncmVzc2lvbiBhbmFseXNpcy4KRm9yIGRvd25sb2FkaW5nIHRpcHMsIHNlZSBodHRwczovL3Jhdy5naXRodWJ1c2VyY29udGVudC5jb20vcnN0dWRpby9jaGVhdHNoZWV0cy9tYWluL2RhdGEtaW1wb3J0LnBkZgoKCjwhLS1cdXJse2h0dHBzOi8vZ2l0aHViLmNvbS9yc3R1ZGlvL2NoZWF0c2hlZXRzL3Jhdy9tYXN0ZXIvZGF0YS10cmFuc2Zvcm1hdGlvbi5wZGZ9LS0+CgoKIyMgRGF0YSBwcm9jZXNzaW5nIHNpbXVsYXRpb24KCk1ha2UgcmFuZG9tIGRhdGFzZXRzCgpgYGB7cn0KbWFrZV9ub2lzeV9kYXRhIDwtIGZ1bmN0aW9uKG4pewogICAgeCA8LSBzZXEoMSwxMCwgbGVuZ3RoLm91dD1uKQogICAgZSA8LSBybm9ybShsZW5ndGgoeCksIG1lYW49MCwgc2Q9MTApCiAgICB5IDwtIC4yNSp4ICsgZQogICAgeHlfbWF0IDwtIGRhdGEuZnJhbWUoSUQ9c2VxKHgpLHg9eCwgeT15KQogICAgcmV0dXJuKHh5X21hdCkKfQpkYXQxIDwtIG1ha2Vfbm9pc3lfZGF0YSg2KQpkYXQxCgpkYXQyIDwtIG1ha2Vfbm9pc3lfZGF0YSg2KQojIyBtZXJnaW5nIGRhdGEgaW4gd2lkZSBmb3JtYXQKZGF0X21lcmdlZF93aWRlIDwtIG1lcmdlKGRhdDEsIGRhdDIsCiAgICBieT0nSUQnLCBzdWZmaXhlcz1jKCcuMScsJy4yJykpCmBgYAoKCgpEYXRhIE1lcmdpbmcKCmBgYHtyfQojIyBtZXJnaW5nIGRhdGEgaW4gbG9uZyBmb3JtYXQgYW5kIHJlc2hhcGluZyB0byB3aWRlCmRhdF9tZXJnZWRfbG9uZyA8LSByYmluZCggY2JpbmQoZGF0MSxERj0xKSxjYmluZChkYXQyLERGPTIpKQpsaWJyYXJ5KHJlc2hhcGUyKQpkYXRfbWVsdGVkIDwtIG1lbHQoZGF0X21lcmdlZF9sb25nLCBpZC52YXJzPWMoJ0lEJywgJ0RGJykpCmRhdF9tZXJnZWRfd2lkZTIgPC0gZGNhc3QoZGF0X21lbHRlZCwgSUR+REYrdmFyaWFibGUpCgpkYXRfbWVyZ2VkX3dpZGUgPT0gZGF0X21lcmdlZF93aWRlMgpgYGAKCgoKPCEtLSAjIyBDT05WRVJUIElNQUdFUwpmb3IgcGRmaWxlIGluICoucGRmIDsgZG8gCmNvbnZlcnQgLXZlcmJvc2UgLWRlbnNpdHkgNTAwICAiJHtwZGZpbGV9IiAiJHtwZGZpbGUlLip9Ii5wbmc7CmRvbmUKLS0+CgojIyBDdXN0b20gZmlndXJlcwoKCmBgYHtyLCBlY2hvPUZBTFNFfQoga25pdHI6OmluY2x1ZGVfZ3JhcGhpY3MoIi4vRmlndXJlc19NYW51YWwvVmVnZXRhdGlvbi5wbmciKQpgYGAKCgpgYGB7ciwgZWNobz1GQUxTRX0KIGtuaXRyOjppbmNsdWRlX2dyYXBoaWNzKCIuL0ZpZ3VyZXNfTWFudWFsL0JhbGFuY2VzX1RyaWFsLnBuZyIpCmBgYAoKYGBge3IsIGVjaG89RkFMU0V9CiBrbml0cjo6aW5jbHVkZV9ncmFwaGljcygiLi9GaWd1cmVzX01hbnVhbC9Qb3B1bGF0aW9uRGVuc2l0eTIucG5nIikKYGBgCgoKYGBge3IsIGVjaG89RkFMU0V9CiBrbml0cjo6aW5jbHVkZV9ncmFwaGljcygiLi9GaWd1cmVzX01hbnVhbC9TYW1wbGVFeGFtcGxlLnBuZyIpCmBgYAoKYGBge3IsIGVjaG89RkFMU0V9CiBrbml0cjo6aW5jbHVkZV9ncmFwaGljcygiLi9GaWd1cmVzX01hbnVhbC9TZW1pSW5jbHVzaXZlX0V4YW1wbGUucG5nIikKYGBgCgpgYGB7ciwgZWNobz1GQUxTRX0KIGtuaXRyOjppbmNsdWRlX2dyYXBoaWNzKCIuL0ZpZ3VyZXNfTWFudWFsL1N0YWJpbGl0eV8zLnBuZyIpCmBgYAoKYGBge3IsIGVjaG89RkFMU0V9CiBrbml0cjo6aW5jbHVkZV9ncmFwaGljcygiLi9GaWd1cmVzX01hbnVhbC9Fdm9sdXRpb25hcnlEeW5hbWljcy5wbmciKQpgYGAKCgpgYGB7ciwgZWNobz1GQUxTRX0KIGtuaXRyOjppbmNsdWRlX2dyYXBoaWNzKCIuL0ZpZ3VyZXNfTWFudWFsL0V4cGVyaW1lbnRfVGltZWxpbmUucG5nIikKYGBgCgoKCgoKCgojIExhdGVzdCB2ZXJzaW9ucwoqKioKCk1ha2Ugc3VyZSB5b3VyIHBhY2thZ2VzIGFyZSB1cCB0byBkYXRlCmBgYHtyLCAgZXZhbD1GQUxTRX0KdXBkYXRlLnBhY2thZ2VzKCkKYGBgCgpNYWtlIHN1cmUgeW91IGhhdmUgdGhlIGxhdGVzdCB2ZXJzaW9uIG9mIFIgZm9yIGNsYXNzLiBJZiBub3QsIHRoZW4gcmVpbnN0YWxsIFIuCgoKQWZ0ZXIgcmVpbnN0YWxsaW5nLCB5b3UgY2FuIHVwZGF0ZSAqYWxsKiBwYWNrYWdlcyBzdG9yZWQgaW4gKmFsbCogYC5saWJQYXRocygpYCB3aXRoIHRoZSBmb2xsb3dpbmcgY29tbWFuZAoKYGBge3IsICBldmFsPUZBTFNFfQpwa2dzIDwtIGluc3RhbGxlZC5wYWNrYWdlcyggLmxpYlBhdGhzKCkgKVssJ1BhY2thZ2UnXQppbnN0YWxsLnBhY2thZ2VzKAogICAgcGtncz1wa2dzLAogICAgbGliPS5saWJQYXRocygpWzFdLAogICAgdHlwZT0nc291cmNlJwopCmBgYAoKVG8gZmluZCBhbGwgYnJva2VuIHBhY2thZ2VzIGFmdGVyIGFuIHVwZGF0ZQpgYGB7ciwgIGV2YWw9RkFMU0V9CmxpYnJhcnkocHVycnIpCgpzZXRfbmFtZXMoLmxpYlBhdGhzKCkpICU+JQogIG1hcChmdW5jdGlvbihsaWIpIHsKICAgIC5wYWNrYWdlcyhhbGwuYXZhaWxhYmxlID0gVFJVRSwgbGliLmxvYyA9IGxpYikgJT4lCiAgICAgICAga2VlcChmdW5jdGlvbihwa2cpIHsKICAgICAgICAgICAgZiA8LSBzeXN0ZW0uZmlsZSgnTWV0YScsICdwYWNrYWdlLnJkcycsIHBhY2thZ2UgPSBwa2csIGxpYi5sb2MgPSBsaWIpCiAgICAgICAgICAgIHRyeUNhdGNoKHtyZWFkUkRTKGYpOyBGQUxTRX0sIGVycm9yID0gZnVuY3Rpb24oZSkgVFJVRSkKICAgICAgICB9KQogIH0pCiMjIGh0dHBzOi8vc3RhY2tvdmVyZmxvdy5jb20vcXVlc3Rpb25zLzMxOTM1NTE2L2luc3RhbGxpbmctci1wYWNrYWdlcy1lcnJvci1pbi1yZWFkcmRzZmlsZS1lcnJvci1yZWFkaW5nLWZyb20tY29ubmVjdGlvbi81NTk5Nzc2NQpgYGAKCgoKCgpgYGB7ciwgZWNobz1GQUxTRX0Ka25pdHI6OmtuaXRfZXhpdCgpCmBgYAoKCgoKCjwhLS0KIyMjICBRdWFudGl0YXRpdmUgQW5hbHlzaXMgb2YgQWxtb3N0IEFueSBUeXBlIG9mIERhdGF9IAoKRS5nLiwgcGxvdHRpbmcgZ2FsYWN0aWMgc3VwZXJjbHVzdGVycwpcdnNwYWNley41XGJhc2VsaW5lc2tpcH0KXGluY2x1ZGVncmFwaGljc1tzY2FsZT0wLjI1LCB0cmltPTAgNWNtIDAgNWNtLCBjbGlwPXRydWVdey4vRmlndXJlcy9zaGFwbGV5LnBkZn0KXHZzcGFjZXstMlxiYXNlbGluZXNraXB9CgpcYmVnaW57UmNvZGV9e2Jhc2ljc3R5bGU9XHRpbnlcdHRmYW1pbHl9CmxpYnJhcnkoc3BhdHN0YXQpCmRhdGEoc2hhcGxleSkKcGxvdChzaGFwbGV5LCBwY2g9MTYsIG1haW49IiIsIGNvbHM9cmdiKDAsMCwwLC4xKSwgY2V4PS40LCB1c2UubWFya3M9RikKXGVuZHtSY29kZX0KPDxlY2hvPVRSVUUsIGNhY2hlPUZBTFNFLCBmaWc9VFJVRSwgZXZhbD1UUlVFPj49CmxpYnJhcnkoc3BhdHN0YXQpCmRhdGEoc2hhcGxleSkKcGxvdChzaGFwbGV5LCBwY2g9MTYsIG1haW49IiIsIGNvbHM9cmdiKDAsMCwwLC4xKSwgY2V4PS40LCB1c2UubWFya3M9RikKQApcdnNwYWNley0uNVxiYXNlbGluZXNraXB9CgpcdGV4dGJme1BoeXNpY3MgYW5kIENoZW1pc3RyeTp9ClBhcnRpY2xlIFNpbXVsYXRpb25zLCBETkEgU2VxdWVuY2VzLCBQcm90ZWluIEZvbGRpbmdcXApcdGV4dGJme0Jpb2xvZ3k6fSAKSHVtYW4gQnJhaW4gTW9ycGhvbG9neSwgSW5zZWN0IFRyYWplY3RvcmllcyAgXFwKe1xmb290bm90ZXNpemUgXHRleHR0dHtiaW8zZDp9IApcdXJse2h0dHA6Ly90aGVncmFudGxhYi5vcmcvYmlvM2QvdHV0b3JpYWxzL3N0cnVjdHVyZS1hbmFseXNpc30gXFwKXHVybHtodHRwczovL2Vjb21vcnBoLndvcmRwcmVzcy5jb20vMjAxNS8wOC8wNS9yZXRpbmFsLXRvcG9ncmFwaHktbWFwcy1pbi1yL319IFxcClx0ZXh0YmZ7QXN0cm9ub215On0gTWFwIHRoZSBCcmlnaHRuZXNzIG9mIEdhbGF4eSBMb2NhdGlvbnMgCntcZm9vdG5vdGVzaXplIFx1cmx7aHR0cHM6Ly9hc2FpcC5wc3UuZWR1L3Jlc291cmNlcy9kYXRhc2V0c319ClxiYXNoClJzY3JpcHQgLWUgJ2xpYnJhcnkoc3BhdHN0YXQpOyBkYXRhKHNoYXBsZXkpOyAgcGRmKCIuL3NoYXBsZXkucGRmIik7IHBsb3QodW5tYXJrKHNoYXBsZXkpLCBwY2g9MTYsIG1haW4gPSAiIiwgY29scz1yZ2IoMCwwLDAsLjEpLCBjZXg9LjQgKScKXEVORAoKIyMjICAuLi4gVG8gTGFyZ2UgU2NhbGUgT2JzZXJ2YXRpb25hbCBEYXRhIC4uLn0Ke1xmb290bm90ZXNpemUgXHVybHtodHRwczovL2NyYW4uci1wcm9qZWN0Lm9yZy93ZWIvdmlld3MvTWVkaWNhbEltYWdpbmcuaHRtbH19CmRhdGEoYnJhaW5zKQpzaGFwZXMzZChicmFpbnMkeFssLF0sIHR5cGU9ImRvdHMiLCBheGVzMz1UKSAgIyMgMjQgbWFya2VycyAoeCx5LHopIGZvciA1OSBwZW9wbGUgJAoKXHRleHRiZntTb2NpYWwgYW5kIEhpc3RvcmljYWw6fSBJbmNvbWUsIFBvcHVsYXRpb24sIENyaW1lLCAuLi4gXFwKaS5lLiBcZm9vdG5vdGVzaXple1x1cmx7aHR0cDovL3d3dy5jZW5zdXMuZ292L2RpZC93d3cvc2FpcGUvZGF0YS9zdGF0ZWNvdW50eS9tYXBzL2l5MjAxNC9Ub3RfUGN0X1Bvb3IyMDE0LnBkZn19IFxcCmkuZS4gXGZvb3Rub3Rlc2l6ZXtcdXJse2h0dHA6Ly9saW5jb2xubXVsbGVuLmNvbS9wcm9qZWN0cy9zbGF2ZXJ5L319XFx+XFwKClx0ZXh0YmZ7RWNvbG9neTp9IEdsb2JhbCBUZW1wZXJhdHVyZXMsIFNvaWwgQXR0cmlidXRlcywgTGFuZCBVc2UsIC4uLlxcCmh0dHBzOi8vYmVuYm9yZ3kud29yZHByZXNzLmNvbS8KaS5lLiBcZm9vdG5vdGVzaXple1x1cmx7aHR0cHM6Ly9iZW5ib3JneS5maWxlcy53b3JkcHJlc3MuY29tLzIwMTQvMDgvc3BhdGlhbGl6ZW1hcF8yLmpwZ319IFxcCmkuZS4gXGZvb3Rub3Rlc2l6ZXtcdXJse2h0dHA6Ly9lc2RhYy5qcmMuZWMuZXVyb3BhLmV1L3RoZW1lcy9nbG9iYWwtZGF0YS1vdGhlci1pbml0aWF0aXZlc319IFxcCi0tPgoKCgoKPCEtLSAjIyBDT01QSUxFIEZST00gQ0xJCiAgICBSc2NyaXB0IC1lICJybWFya2Rvd246OnJlbmRlcignUmFuZFJzdHVkaW8uUm1kJykiCi0tPgoKCg==</div>


</div>
</div>

</div>

<script>

// add bootstrap table styles to pandoc tables
function bootstrapStylePandocTables() {
  $('tr.odd').parent('tbody').parent('table').addClass('table table-condensed');
}
$(document).ready(function () {
  bootstrapStylePandocTables();
});


</script>

<!-- tabsets -->

<script>
$(document).ready(function () {
  window.buildTabsets("TOC");
});

$(document).ready(function () {
  $('.tabset-dropdown > .nav-tabs > li').click(function () {
    $(this).parent().toggleClass('nav-tabs-open');
  });
});
</script>

<!-- code folding -->
<script>
$(document).ready(function () {
  window.initializeSourceEmbed("RandRstudio.Rmd");
});
</script>

<script>
$(document).ready(function ()  {

    // temporarily add toc-ignore selector to headers for the consistency with Pandoc
    $('.unlisted.unnumbered').addClass('toc-ignore')

    // move toc-ignore selectors from section div to header
    $('div.section.toc-ignore')
        .removeClass('toc-ignore')
        .children('h1,h2,h3,h4,h5').addClass('toc-ignore');

    // establish options
    var options = {
      selectors: "h1,h2",
      theme: "bootstrap3",
      context: '.toc-content',
      hashGenerator: function (text) {
        return text.replace(/[.\\/?&!#<>]/g, '').replace(/\s/g, '_');
      },
      ignoreSelector: ".toc-ignore",
      scrollTo: 0
    };
    options.showAndHide = true;
    options.smoothScroll = true;

    // tocify
    var toc = $("#TOC").tocify(options).data("toc-tocify");
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
